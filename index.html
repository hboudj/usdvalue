
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>USD Value Converter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <style>
    body { font-family: Arial, sans-serif; background: #f0f2f5; padding: 40px; text-align: center; }
    h1 { color: #333; }
    .converter { background: white; padding: 30px; border-radius: 10px; display: inline-block; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    select { width: 300px; font-size: 16px; padding: 10px; margin: 10px; }
    #result { margin-top: 20px; font-size: 24px; color: #2a2a2a; }
    label { font-weight: bold; }
  </style>
</head>
<body>
  <div class="converter">
    <h1>USD Value</h1>
    <p>1 USD = <span id="result">...</span></p>

    <div>
      <label>Convert to a FIAT currency:</label><br>
      <select id="fiat-select" class="js-fiat-select" style="width: 300px;"></select>
    </div>

    <div>
      <label>Convert to a CRYPTO currency:</label><br>
      <select id="crypto-select" class="js-crypto-select" style="width: 300px;"></select>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script>
    const fiatSelect = document.getElementById("fiat-select");
    const cryptoSelect = document.getElementById("crypto-select");
    const resultSpan = document.getElementById("result");

    async function loadFiatCurrencies() {
      const res = await fetch('https://v6.exchangerate-api.com/v6/0b93015e962b4696101c7715/latest/USD');
      const data = await res.json();
      const currencies = Object.keys(data.conversion_rates);
      currencies.forEach(code => {
        const option = document.createElement("option");
        option.value = code;
        option.text = code;
        fiatSelect.appendChild(option);
      });
    }

    async function loadCryptoCurrencies() {
      const res = await fetch('https://api.coingecko.com/api/v3/coins/list?per_page=100&page=1');
      const data = await res.json();
      data.forEach(coin => {
        const option = document.createElement("option");
        option.value = coin.id;
        option.text = `${coin.name} (${coin.symbol.toUpperCase()})`;
        cryptoSelect.appendChild(option);
      });
    }

    async function fetchRate(value, type) {
      try {
        if (type === "fiat") {
          const res = await fetch('https://v6.exchangerate-api.com/v6/0b93015e962b4696101c7715/latest/USD');
          const data = await res.json();
          const rate = data.conversion_rates[value];
          resultSpan.innerText = rate ? rate.toFixed(4) + ' ' + value : "Unavailable";
        } else {
          const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${value}&vs_currencies=usd`);
          const data = await res.json();
          const rate = 1 / (data[value]?.usd || 1);
          resultSpan.innerText = rate.toFixed(6) + ' ' + value.toUpperCase();
        }
      } catch (e) {
        resultSpan.innerText = "Error";
      }
    }

    fiatSelect.addEventListener("change", () => {
      cryptoSelect.disabled = !!fiatSelect.value;
      fetchRate(fiatSelect.value, "fiat");
    });

    cryptoSelect.addEventListener("change", () => {
      fiatSelect.disabled = !!cryptoSelect.value;
      fetchRate(cryptoSelect.value, "crypto");
    });

    document.addEventListener("DOMContentLoaded", async () => {
      await loadFiatCurrencies();
      await loadCryptoCurrencies();
      $('.js-fiat-select').select2({ placeholder: "Select a fiat currency", allowClear: true });
      $('.js-crypto-select').select2({ placeholder: "Select a crypto", allowClear: true });
    });
  </script>
</body>
</html>
