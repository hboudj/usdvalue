
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>USD Value Converter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <style>
    body { font-family: Arial, sans-serif; background: #f0f2f5; padding: 40px; text-align: center; }
    h1 { color: #333; }
    .converter { background: white; padding: 30px; border-radius: 10px; display: inline-block; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    select, input[type="radio"] { margin: 10px; }
    .hidden { display: none; }
    #result { margin-top: 20px; font-size: 24px; color: #2a2a2a; }
    label { font-weight: bold; }
  </style>
</head>
<body>
  <div class="converter">
    <h1>USD Value</h1>
    <p>1 USD = <span id="result">Select a currency</span></p>

    <div>
      <label><input type="radio" name="type" value="fiat"> FIAT</label>
      <label><input type="radio" name="type" value="crypto"> CRYPTO</label>
    </div>

    <div id="fiat-container" class="hidden">
      <select id="fiat-select" class="js-select2" style="width: 300px;"></select>
    </div>

    <div id="crypto-container" class="hidden">
      <select id="crypto-select" class="js-select2" style="width: 300px;"></select>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script>
    const fiatSelect = document.getElementById("fiat-select");
    const cryptoSelect = document.getElementById("crypto-select");
    const resultSpan = document.getElementById("result");
    const fiatContainer = document.getElementById("fiat-container");
    const cryptoContainer = document.getElementById("crypto-container");

    let fiatRates = {};

    async function loadFiatCurrencies() {
      const res = await fetch('https://v6.exchangerate-api.com/v6/0b93015e962b4696101c7715/latest/USD');
      const data = await res.json();
      fiatRates = data.conversion_rates;
      Object.keys(fiatRates).forEach(code => {
        const option = document.createElement("option");
        option.value = code;
        option.text = code;
        fiatSelect.appendChild(option);
      });
    }

    async function loadCryptoCurrencies() {
      const res = await fetch('https://api.coingecko.com/api/v3/coins/list?per_page=200&page=1');
      const data = await res.json();
      data.forEach(coin => {
        const option = document.createElement("option");
        option.value = coin.id;
        option.text = `${coin.name} (${coin.symbol.toUpperCase()})`;
        cryptoSelect.appendChild(option);
      });
    }

    async function fetchRate() {
      const selectedType = document.querySelector('input[name="type"]:checked')?.value;
      if (selectedType === "fiat") {
        const value = fiatSelect.value;
        const rate = fiatRates[value];
        resultSpan.innerText = rate ? rate.toFixed(4) + ' ' + value : "Unavailable";
      } else if (selectedType === "crypto") {
        const value = cryptoSelect.value;
        if (!value) return;
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${value}&vs_currencies=usd`);
        const data = await res.json();
        const usdValue = data[value]?.usd;
        if (usdValue && usdValue > 0) {
          const rate = 1 / usdValue;
          resultSpan.innerText = rate.toFixed(6) + ' ' + value.toUpperCase();
        } else {
          resultSpan.innerText = "Unavailable";
        }
      }
    }

    document.querySelectorAll('input[name="type"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const selectedType = document.querySelector('input[name="type"]:checked').value;
        if (selectedType === "fiat") {
          fiatContainer.classList.remove("hidden");
          cryptoContainer.classList.add("hidden");
          resultSpan.innerText = "Select a currency";
        } else {
          fiatContainer.classList.add("hidden");
          cryptoContainer.classList.remove("hidden");
          resultSpan.innerText = "Select a currency";
        }
      });
    });

    fiatSelect.addEventListener("change", fetchRate);
    cryptoSelect.addEventListener("change", fetchRate);

    document.addEventListener("DOMContentLoaded", async () => {
      await loadFiatCurrencies();
      await loadCryptoCurrencies();
      $('.js-select2').select2({ placeholder: "Search currency...", allowClear: true });
    });
  </script>
</body>
</html>
